(()=>{"use strict";const e=window.wp.interactivity,{state:n,actions:t}=(0,e.store)("moiraine/menu-designer",{state:{get isMenuOpen(){return Object.values(n.menuOpenedBy).filter(Boolean).length>0},get menuOpenedBy(){return(0,e.getContext)().menuOpenedBy}},actions:{toggleMenuOnClick(){const c=(0,e.getContext)(),{ref:u}=(0,e.getElement)();n.menuOpenedBy.click||n.menuOpenedBy.focus?t.closeMenuOnClick():(c.previousFocus=u,t.openMenu("click"))},closeMenuOnClick(){t.closeMenu("click"),t.closeMenu("focus")},handleMenuKeydown(e){n.menuOpenedBy.click&&"Escape"===e?.key&&t.closeMenuOnClick()},handleOutsideClick(n){const c=(0,e.getContext)(),u=c?.megaMenu;u&&!u.contains(n.target)&&t.closeMenuOnClick()},openMenu(e="click"){n.menuOpenedBy[e]=!0},closeMenu(t="click"){const c=(0,e.getContext)();n.menuOpenedBy[t]=!1,n.isMenuOpen||(c.megaMenu?.contains(window.document.activeElement)&&c.previousFocus?.focus(),c.previousFocus=null,c.megaMenu=null)}},callbacks:{initMenu(){const t=(0,e.getContext)(),{ref:c}=(0,e.getElement)();n.isMenuOpen&&(t.megaMenu=c)}}})})();