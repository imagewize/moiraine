import{getContext as e,getElement as n,store as c}from"@wordpress/interactivity";const{state:u,actions:o}=c("moiraine/menu-designer",{state:{get isMenuOpen(){return Object.values(u.menuOpenedBy).filter(Boolean).length>0},get menuOpenedBy(){return e().menuOpenedBy||{}}},actions:{toggleMenuOnClick(){const c=e(),{ref:s}=n();u.menuOpenedBy.click||u.menuOpenedBy.focus?o.closeMenuOnClick():(c.previousFocus=s,o.openMenu("click"))},closeMenuOnClick(){o.closeMenu("click"),o.closeMenu("focus")},handleMenuKeydown(e){u.menuOpenedBy.click&&"Escape"===e?.key&&o.closeMenuOnClick()},handleOutsideClick(n){const c=e(),u=c?.megaMenu;u&&!u.contains(n.target)&&o.closeMenuOnClick()},openMenu(e="click"){u.menuOpenedBy[e]=!0},closeMenu(n="click"){const c=e();u.menuOpenedBy[n]=!1,u.isMenuOpen||(c.megaMenu?.contains(window.document.activeElement)&&c.previousFocus?.focus(),c.previousFocus=null,c.megaMenu=null)}},callbacks:{initMenu(){const c=e(),{ref:o}=n();u.isMenuOpen&&(c.megaMenu=o)}}});