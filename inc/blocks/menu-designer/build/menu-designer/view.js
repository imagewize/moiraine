import{getContext as e,getElement as n,store as c}from"@wordpress/interactivity";const{state:o,actions:s}=c("moiraine/menu-designer",{state:{get isMenuOpen(){const n=e();return Object.values(n.menuOpenedBy||{}).filter(Boolean).length>0}},actions:{toggleMenuOnClick(){const c=e(),{ref:o}=n();c.menuOpenedBy.click||c.menuOpenedBy.focus?s.closeMenuOnClick():(c.previousFocus=o,s.openMenu("click"))},closeMenuOnClick(){s.closeMenu("click"),s.closeMenu("focus")},handleMenuKeydown(n){e().menuOpenedBy.click&&"Escape"===n?.key&&s.closeMenuOnClick()},handleOutsideClick(e){const{ref:c}=n(),o=c.querySelector(".moiraine-menu-designer");o&&!o.contains(e.target)&&s.closeMenuOnClick()},openMenu(n="click"){e().menuOpenedBy[n]=!0},closeMenu(n="click"){const c=e();c.menuOpenedBy[n]=!1,o.isMenuOpen||(c.previousFocus&&c.previousFocus.focus(),c.previousFocus=null)}}});