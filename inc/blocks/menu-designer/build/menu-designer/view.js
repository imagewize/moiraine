(()=>{"use strict";const e=window.wp.interactivity,{state:n,actions:c}=(0,e.store)("moiraine/menu-designer",{state:{get isMenuOpen(){return Object.values(n.menuOpenedBy).filter(Boolean).length>0},get menuOpenedBy(){return(0,e.getContext)().menuOpenedBy}},actions:{toggleMenuOnClick(){const t=(0,e.getContext)(),{ref:u}=(0,e.getElement)();n.menuOpenedBy.click||n.menuOpenedBy.focus?c.closeMenuOnClick():(t.previousFocus=u,c.openMenu("click"))},closeMenuOnClick(){c.closeMenu("click"),c.closeMenu("focus")},handleMenuKeydown(e){n.menuOpenedBy.click&&"Escape"===e?.key&&c.closeMenuOnClick()},handleOutsideClick(n){const{ref:t}=(0,e.getElement)(),u=t.querySelector(".moiraine-menu-designer");u&&!u.contains(n.target)&&c.closeMenuOnClick()},openMenu(e="click"){n.menuOpenedBy[e]=!0},closeMenu(c="click"){const t=(0,e.getContext)();n.menuOpenedBy[c]=!1,n.isMenuOpen||(t.previousFocus&&t.previousFocus.focus(),t.previousFocus=null)}}})})();